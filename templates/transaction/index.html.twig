{% extends 'base.html.twig' %}

{% block title %}Page des transactions{% endblock %}

{% block body %}
<div class="page-container">
    <h1>Page des transactions</h1>
    <div class="btn-navigation">
        <a href="{{ path('app_transaction_new') }}" class="btn btn-primary">â• Ajouter une nouvelle transaction</a>
        <br>
        <a href="{{ path('app_user_dashboard')}}" class="btn btn-success">â†©ï¸Revenir au Dashboard</a>
    </div>
<div class="mes-transactions">
    {% if transactionsByDate is not empty %}
    <div class="transactions-container">
        <table class="transactions-table">
            <thead>
                <tr>
                    <th>Description</th>
                    <th>Montant</th>
                    <th>CatÃ©gorie</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for dateGroup in transactionsByDate %}
                    <tr class="date-separator">
                        <td colspan="4" class="date-header">
                            ğŸ“… {{ dateGroup.date|date('d/m/Y') }}
                        </td>
                    </tr>
                    {% for transaction in dateGroup.transactions %}
                        <tr class="transaction-item {{ transaction.type.value|lower }}">
                            <td class="transaction-description">{{ transaction.description }}</td>
                            <td class="transaction-amount">
                                {% if transaction.type.label == 'DÃ©pense' %}
                                    {{ transaction.amount }}â‚¬
                                {% else %}
                                    +{{ transaction.amount }}â‚¬
                                {% endif %}
                            </td>
                            <td>{{ transaction.category.name }}</td>
                            <td class="transaction-actions">
                                <a href="{{ path('app_transaction_show', {'id': transaction.id}) }}" class="btn-icon" title="Voir">ğŸ‘ï¸</a>
                                <a href="{{ path('app_transaction_edit', {'id': transaction.id}) }}" class="btn-icon" title="Modifier">âœï¸</a>
                                <a href="{{ path('app_transaction_delete', {'id': transaction.id}) }}" class="btn-icon btn-delete" title="Supprimer" onclick="return confirm('Confirmer la suppression ?')">ğŸ—‘ï¸</a>
                            </td>
                        </tr>
                    {% endfor %}
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
        <p class="no-transactions">Aucune transaction pour le moment.</p>
    {% endif %}
    </div>
</div>
{% endblock %}